<html>
<head>
  <meta charset="utf-8">
  <title>PyTrees Viz</title>
  <link rel="stylesheet" href="py_trees-0.1.0.css">
</head>
<script src="jointjs/dagre-0.8.4.min.js"></script>
<script src="jointjs/graphlib-2.1.7.min.js"></script>
<script src="jointjs/jquery-3.4.1.min.js"></script>
<script src="jointjs/lodash-4.17.11.min.js"></script>
<script src="jointjs/backbone-1.4.0.js"></script>
<script src="jointjs/joint-3.0.2.min.js"></script>
<script src="py_trees-0.1.0.js"></script>
<link rel="stylesheet" type="text/css" href="jointjs/joint-3.0.2.min.css"/>
<style>
  body {
    margin: 0;
  }
</style>
<body>
  <div id="foo"></div>
  <script type="text/javascript">
    py_trees.print_versions()
  </script>
  <div id="canvas"></div>
  <script type="text/javascript">
    graph = new joint.dia.Graph({});
    paper = py_trees.create_paper({graph: graph})

    // Accept a tree from external sources
    rendered = false
    render_tree = function({tree}) {
      json_tree = JSON.parse(tree)
      if (!rendered) {
        py_trees.update_graph({graph: graph, tree: json_tree})
        py_trees.layout_graph({graph: graph})
        py_trees.fit_content_to_canvas(paper)
        rendered = true
        return "rendered"
      } else {
        console.log("Tree\n%s", tree)
        return "already rendered"
      }
    }

    // Render a tree from the py_trees.js library
    //
    // tree = py_trees.experiments.create_demo_tree_definition()
    // py_trees.update_graph({graph: graph, tree: tree})
    // py_trees.layout_graph({graph: graph})
    // py_trees.fit_content_to_canvas(paper)

  </script>
</body>
</html>
